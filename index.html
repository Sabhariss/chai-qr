<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>All Hail Chai ‚òï</title>
  <meta name="description" content="Scan ‚Üí land here ‚Üí join Team 3 and sip that chai." />
  <style>
    :root{
      /* === Dark theme colors === */
      --bg:#000000;             /* page background (black) */
      --text:#f3f4f6;           /* main text (near-white) */
      --muted:#cbd5e1;          /* secondary text */
      --card:#111418;           /* card background (dark) */
      --card-border:#22262b;    /* card border */
      --accent:#19c37d;         /* accent green */
      --shadow:0 10px 30px rgba(0,0,0,.4);
      --radius:18px;
      --gap:22px;

      /* Watermark (disabled by default on black) */
      --logo-url: url('logo.png');
      --logo-opacity: 0;        /* set to .05‚Äì.12 if you still want a faint bg watermark */
      --logo-size: 520px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
    }

    /* Optional centered watermark (currently hidden via --logo-opacity:0) */
    body::before{
      content:"";
      position:fixed; inset:0; pointer-events:none;
      background: var(--logo-url) center/var(--logo-size) no-repeat;
      opacity: var(--logo-opacity);
      mix-blend-mode: lighten; /* looks nice on dark bg if enabled */
    }

    .container{max-width:1100px; margin:0 auto; padding:36px 22px 80px}

    h1{
      margin:0 0 6px; font-weight:900; letter-spacing:.2px;
      font-size:clamp(30px, 5vw, 46px);
      color:#f9fafb;
    }
    .subtle{color:var(--muted); font-size:14px}

    .grid{
      display:grid; gap:var(--gap);
      grid-template-columns: 1fr;
      margin-top:22px;
    }
    @media (min-width:860px){
      .grid{ grid-template-columns: 1fr 1fr; }
    }

    .card,.flip{
      background:var(--card); border:1px solid var(--card-border);
      border-radius:var(--radius); box-shadow:var(--shadow);
      padding:20px; transition:transform .18s ease, box-shadow .18s ease;
    }
    .card:hover,.flip:hover{
      transform:translateY(-2px);
      box-shadow:0 18px 36px rgba(0,0,0,.5);
    }

    .as-btn{ cursor:pointer; text-align:left; }
    .row{ display:flex; gap:14px; align-items:flex-start; }

    .icon{
      flex:0 0 50px; height:50px; display:grid; place-items:center;
      border-radius:14px; background:#1f2937; font-size:22px; border:1px solid #2a3441;
      color:#e5e7eb;
    }
    h2{ margin:0; font-size:22px; font-weight:900; letter-spacing:.2px; color:#eaf2ee }
    .desc{ margin:6px 0 0; color:#cbd5e1; font-size:15px }

    /* Flip card */
    .flip{ perspective:1000px; padding:0; }
    .flip-inner{
      position:relative; min-height:126px;
      transform-style:preserve-3d; transition:transform .6s ease;
      padding:20px;
    }
    .flip-face{ position:absolute; inset:0; padding:20px; backface-visibility:hidden; }
    .flip-back{ transform:rotateY(180deg); }
    .flipped .flip-inner{ transform:rotateY(180deg); }

    /* Toast */
    #toast{
      position:fixed; left:50%; bottom:22px; transform:translateX(-50%);
      background:#0b0f12; color:#fff; padding:10px 14px; border-radius:12px;
      box-shadow:var(--shadow); opacity:0; transition:opacity .25s ease;
      font-size:14px; pointer-events:none;
      border:1px solid #1f2937;
    }

    /* Top-right logo */
    .brand{
      display:flex; align-items:center; gap:10px;
    }
    .brand-logo{
      width:auto; height:48px; object-fit:contain;
      filter: drop-shadow(0 2px 8px rgba(0,0,0,.6));
    }
  </style>
</head>
<body>
  <div class="container">
    <header style="display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;">
      <div>
        <h1>Starbucks menu: Chai only</h1>
        <p class="subtle">Welcome! You have made some good for the day.</p>
      </div>

      <!-- Logo in the top-right -->
      <div class="brand">
        <img src="logo.png" alt="Event Logo" class="brand-logo">
      </div>
    </header>

    <main>
      <div class="grid">
        <!-- Tile 1 -->
        <button class="card as-btn" id="tile1">
          <div class="row">
            <div class="icon">üçµ</div>
            <div>
              <h2>Team ‚ÄúChai@Starbucks‚Äù ‚Äî sip, win, repeat.</h2>
              <p class="desc">Order your favorite chai and raise the cup high. ‚òïÔ∏è</p>
            </div>
          </div>
        </button>

        <!-- Tile 2: Petition (front) -> Boycott (back) + auto-join -->
        <div class="flip as-btn" id="tileJoinFlip">
          <div class="flip-inner">
            <!-- FRONT -->
            <div class="flip-face">
              <div class="row">
                <div class="icon">üìù</div>
                <div>
                  <h2>Petition to join Team 3</h2>
                  <p class="desc">Tap here to know the procedure for the same.</p>
                </div>
              </div>
            </div>
            <!-- BACK -->
            <div class="flip-face flip-back">
              <div class="row">
                <div class="icon">üì£</div>
                <div>
                  <h2>Boycott your game to join Team 3</h2>
                  <p class="desc">You will be <em>auto-indicted</em></p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Tile 3 -->
        <div class="flip as-btn" id="tileFlip">
          <div class="flip-inner">
            <!-- FRONT -->
            <div class="flip-face">
              <div class="row">
                <div class="icon">üéÅ</div>
                <div>
                  <h2>Win a week of chai</h2>
                  <p class="desc">Tap to get the secret on earning the reward.</p>
                </div>
              </div>
            </div>
            <!-- BACK -->
            <div class="flip-face flip-back">
              <div class="row">
                <div class="icon">üé≤</div>
                <div>
                  <h2>Lose a game with Team 3</h2>
                  <p class="desc">Give us a heads-up beforehand. How's that for a deal.</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Tile 4 -->
        <button class="card as-btn" id="tileMap">
          <div class="row">
            <div class="icon">üìç</div>
            <div>
              <h2>Find the chai zone</h2>
              <p class="desc">Head to our cafeteria‚Äôs Chai Zone and get energized ‚òï‚ö°</p>
            </div>
          </div>
        </button>
      </div>

      <p class="subtle" style="margin-top:18px;">Pro tip: Share this link with your squad or print its QR. Chai &gt; everything.</p>
    </main>
  </div>

  <div id="toast">Action completed</div>

  <script>
    const qs = new URLSearchParams(location.search);

    const toast = (msg) => {
      const t = document.getElementById('toast');
      t.textContent = msg;
      t.style.opacity = '1';
      setTimeout(() => t.style.opacity = '0', 1600);
    };

    // Team 3 membership via localStorage
    const TEAM_KEY = 'chai-team';
    const isTeam3 = () => localStorage.getItem(TEAM_KEY) === '3';
    const setTeam3 = () => localStorage.setItem(TEAM_KEY, '3');

    // Tile 2: flip + auto-join on first flip to back
    const tileJoinFlip = document.getElementById('tileJoinFlip');
    let hasJoinedViaFlip = false;

    if (isTeam3()) {
      tileJoinFlip.classList.add('flipped');
      hasJoinedViaFlip = true; // don't re-toast
    }

    tileJoinFlip.addEventListener('click', () => {
      tileJoinFlip.classList.toggle('flipped');
      const nowBackFaceVisible = tileJoinFlip.classList.contains('flipped');
      if (nowBackFaceVisible && !hasJoinedViaFlip && !isTeam3()) {
        setTeam3();
        hasJoinedViaFlip = true;
        toast('You are now in Team 3!');
      }
    });

    // Tile 3: flip
    const tileFlip = document.getElementById('tileFlip');
    tileFlip.addEventListener('click', () => {
      tileFlip.classList.toggle('flipped');
    });

    // Tile 4: Map link via ?map=
    const tileMap = document.getElementById('tileMap');
    tileMap.addEventListener('click', () => {
      const mapUrl = qs.get('map') || '#';
      if (mapUrl && mapUrl !== '#') {
        window.open(mapUrl, '_blank');
      } else {
        toast('Ask the front desk for ‚ÄúChai Zone‚Äù directions ‚ú®');
      }
    });
  </script>
</body>
</html>
