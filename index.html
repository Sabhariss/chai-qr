<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>All Hail Chai ‚òï</title>
  <meta name="description" content="Scan ‚Üí land here ‚Üí join Team 3 and sip that chai." />
  <style>
    :root{
      --bg:#e8f7ea;        /* light green page background */
      --text:#111;
      --muted:#5f6b6b;
      --card:#ffffff;
      --card-border:#d6e5d8;
      --accent:#10a37f;    /* green accent */
      --shadow:0 6px 20px rgba(0,0,0,.08);
      --radius:16px;
      --gap:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font:16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    .container{max-width:1000px; margin:0 auto; padding:28px 20px 80px}
    h1{
      margin:0 0 6px; font-weight:800; letter-spacing:.2px;
      font-size:clamp(28px, 4vw, 40px);
    }
    .subtle{color:var(--muted); font-size:14px}
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      background:#e9fbf3; color:#0e7a62; border:1px solid #c9f1e3;
      padding:6px 10px; border-radius:999px; font-weight:700; font-size:14px;
    }

    /* Grid of tiles */
    .grid{
      display:grid; gap:var(--gap);
      grid-template-columns: 1fr;
      margin-top:20px;
    }
    @media (min-width:680px){
      .grid{ grid-template-columns: 1fr 1fr; }
    }

    /* Card / tile base */
    .card, .flip{
      background:var(--card); border:1px solid var(--card-border);
      border-radius:var(--radius); box-shadow:var(--shadow);
      padding:18px; transition:transform .2s ease, box-shadow .2s ease;
    }
    .card:hover, .flip:hover{ transform:translateY(-2px); box-shadow:0 10px 26px rgba(0,0,0,.1); }
    .row{ display:flex; gap:12px; align-items:flex-start; }
    .icon{
      flex:0 0 42px; height:42px; display:grid; place-items:center;
      border-radius:12px; background:#ecfdf5; font-size:20px;
    }
    h2{ margin:0; font-size:20px; font-weight:800; }
    .desc{ margin:6px 0 0; color:var(--muted); font-size:14px; }

    /* Flip card */
    .flip{ perspective:1000px; padding:0; }
    .flip-inner{
      position:relative; height:100%; min-height:120px;
      transform-style:preserve-3d; transition:transform .6s ease;
      padding:18px;
    }
    .flip-face{
      position:absolute; inset:0; padding:18px;
      backface-visibility:hidden;
    }
    .flip-back{ transform:rotateY(180deg); }
    .flipped .flip-inner{ transform:rotateY(180deg); }

    /* Toast */
    #toast{
      position:fixed; left:50%; bottom:22px; transform:translateX(-50%);
      background:#111; color:#fff; padding:10px 14px; border-radius:12px;
      box-shadow:var(--shadow); opacity:0; transition:opacity .25s ease;
      font-size:14px; pointer-events:none;
    }

    /* Buttons look like cards but clickable */
    .as-btn{ cursor:pointer; text-align:left; }
  </style>
</head>
<body>
  <div class="container">
    <header style="display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;">
      <div>
        <h1>All Hail Chai</h1>
        <p class="subtle">Welcome! This page was opened from a QR code. <span id="fromQR" style="display:none">(We see you üëÄ)</span></p>
      </div>
      <div id="teamPill" class="pill" style="display:none">‚úÖ You‚Äôre in <strong>Team 3</strong></div>
    </header>

    <main>
      <div class="grid">
        <!-- Tile 1 -->
        <button class="card as-btn" id="tile1">
          <div class="row">
            <div class="icon">üçµ</div>
            <div>
              <h2>All hail chai at Starbucks</h2>
              <p class="desc">Order your favorite chai and raise the cup high. Respect the leaves. ‚òïÔ∏è</p>
            </div>
          </div>
        </button>

        <!-- Tile 2: Petition / Auto-join Team 3 -->
        <button class="card as-btn" id="tileJoin">
          <div class="row">
            <div class="icon">üìù</div>
            <div>
              <h2 id="joinTitle">Petition to join Team 3</h2>
              <p class="desc" id="joinText">Click to sign. (Instant acceptance, no forms.)</p>
            </div>
          </div>
        </button>

        <!-- Tile 3: Flip card -->
        <div class="flip as-btn" id="tileFlip">
          <div class="flip-inner">
            <div class="flip-face">
              <div class="row">
                <div class="icon">üéÅ</div>
                <div>
                  <h2>Win a week of chai</h2>
                  <p class="desc">Tap to flip this card for the fine print.</p>
                </div>
              </div>
            </div>
            <div class="flip-face flip-back">
              <div class="row">
                <div class="icon">üé≤</div>
                <div>
                  <h2>Lose a game with Team 3</h2>
                  <p class="desc">Give us a heads-up beforehand. Tap to flip back.</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Tile 4 -->
        <button class="card as-btn" id="tileMap">
          <div class="row">
            <div class="icon">üìç</div>
            <div>
              <h2>Find the chai zone</h2>
              <p class="desc">Head to our cafeteria‚Äôs Chai Zone and get energized ‚òï‚ö°</p>
            </div>
          </div>
        </button>
      </div>

      <p class="subtle" style="margin-top:18px;">Pro tip: Share this link with your squad or print its QR. Chai &gt; everything.</p>
    </main>
  </div>

  <div id="toast">Action completed</div>

  <script>
    const qs = new URLSearchParams(location.search);
    const fromQR = document.getElementById('fromQR');
    if (qs.has('src')) fromQR.style.display = 'inline';

    const toast = (msg) => {
      const t = document.getElementById('toast');
      t.textContent = msg;
      t.style.opacity = '1';
      setTimeout(() => t.style.opacity = '0', 1600);
    };

    // Team 3 membership via localStorage
    const TEAM_KEY = 'chai-team';
    const isTeam3 = () => localStorage.getItem(TEAM_KEY) === '3';
    const setTeam3 = () => localStorage.setItem(TEAM_KEY, '3');

    const teamPill = document.getElementById('teamPill');
    const reflectTeam = () => { if (isTeam3()) teamPill.style.display = 'inline-flex'; };
    reflectTeam();

    // Tile 2: Petition / Auto-join
    const tileJoin = document.getElementById('tileJoin');
    const joinTitle = document.getElementById('joinTitle');
    const joinText  = document.getElementById('joinText');

    const applyJoinedCopy = () => {
      joinTitle.textContent = 'Boycott your game ‚Äî joined Team 3';
      joinText.textContent  = 'You were auto-added to Team 3. Welcome aboard.';
    };
    if (isTeam3()) applyJoinedCopy();

    tileJoin.addEventListener('click', () => {
      setTeam3();
      applyJoinedCopy();
      reflectTeam();
      toast('You are now in Team 3!');
    });

    // Tile 3: Flip behaviour
    const tileFlip = document.getElementById('tileFlip');
    tileFlip.addEventListener('click', () => {
      tileFlip.classList.toggle('flipped');
    });

    // Tile 4: Map nudge (wire to a real map link via ?map=)
    const tileMap = document.getElementById('tileMap');
    tileMap.addEventListener('click', () => {
      const mapUrl = qs.get('map') || '#';
      if (mapUrl && mapUrl !== '#') {
        window.open(mapUrl, '_blank');
      } else {
        toast('Ask the front desk for ‚ÄúChai Zone‚Äù directions ‚ú®');
      }
    });
  </script>
</body>
</html>
